<!DOCTYPE html>
<html>
  <head>
    <!-- add here external api url-->
    <script src="https://8x8.vc/vpasa/external_api.js" async></script>
    <style>
      html,
      body,
      #jaas-container {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript">
      var api;
      
      const domain = "";
      // add the room name
      // ex vpaas-magic-cookie-..../testurl
      const roomName = "";
      const jwt = "";
      var youtubeStreamKey = "";
      var youtubeBroadcastID = "";
      window.onload = () => {
        api = new JitsiMeetExternalAPI(domain, {
          roomName,
          parentNode: document.querySelector("#jaas-container"),
          jwt
        });
        api.addListener("videoConferenceJoined", (r) => {
          api.executeCommand("toggleLobby", true);
        });
      };
    </script>
  </head>
  <body>
    <button onclick="startStream()">Start Stream</button>
    <button onclick="stopStream()">Stop Stream</button>
    <div id="jaas-container" />
  </body>
  <script>
    function startStream() {
      api.executeCommand("startRecording", {
        mode: "stream",
        youtubeStreamKey, //the youtube stream key.
        youtubeBroadcastID, //the youtube broacast ID.
      });
      console.log("Start Stream");
    }
    function stopStream() {
      api.executeCommand("stopRecording", "stream");
      console.log("Stop Stream");
    }
  </script>
</html>
